


<section
  class="bg-cover bg-center bg-repeat box-border w-full flex justify-center flex-wrap items-start content-start text-white max-w-primaryPage mx-auto flex-col"
  [style.backgroundImage]="'url('+backgroundImage+')'">
  <div class="w-full bg-gradient-to-r from-gray-900 to-transparent bg-cover bg-center">
    <div class="relative top-0 left-0 flex justify-center w-full min-w-full flex-wrap items-start content-start">
      <!-- Header Title -->
      <div class="py-8 px-0 w-full">
        <div class="px-10 flex justify-start items-start content-start">
          <h2 class="text-3xl font-bold mr-10">Latest Trailers</h2>
          <div class="inline-flex rounded-md shadow-sm bg-transparent" role="group">
            <button type="button"
                class="inline-flex items-center px-4 py-2 text-sm font-medium text-white bg-transparent border border-gray-200 rounded-s-lg hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:focus:ring-blue-500 dark:focus:text-white">
           
                Streaming
            </button>
            <button type="button" (click)="fetchTV()"
                class="inline-flex items-center px-4 py-2 text-sm font-medium text-gray-900 bg-transparent border-t border-b border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:text-white dark:hover:text-blue-700  dark:focus:ring-blue-500 dark:focus:text-white">
            
                On TV
            </button>
            <button type="button"
                class="inline-flex items-center px-4 py-2 text-sm font-medium text-gray-900 bg-transparent border-t border-b border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:text-white dark:hover:text-blue-700  dark:focus:ring-blue-500 dark:focus:text-white">
              
                For Rent
            </button>
            <button type="button"
                class="inline-flex items-center px-4 py-2 text-sm font-medium text-gray-900 rounded-e-lg bg-transparent border-t border-b border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-2 focus:ring-blue-700 focus:text-blue-700 dark:text-white dark:hover:text-blue-700  dark:focus:ring-blue-500 dark:focus:text-white">
             
                In Theaters
            </button>
        </div>

        </div>
        
      </div>

      <!-- Movie List -->
      <div class="flex justify-start h-auto min-h-0 overflow-y-hidden overflow-x-scroll pb-5 pt-5">
        <div *ngFor="let movie of movies"
             class="flex ml-10 flex-wrap w-72 bg-transparent h-auto transition ease-in-out delay-150 hover:-translate-y-1 hover:scale-110"
             (mouseover)="updateBackground(movie.backdrop_path)"
             (mouseleave)="resetBackground()"
             (click)="openTrailerModal(movie.id)"
             (click)="openTVTrailerModal(movie.id)" > <!-- Movie poster click triggers modal -->
             
          <!-- Movie Poster -->
          <div class="flex w-full min-w-72 relative">
            <div class="block overflow-hidden py-0 w-full h-full">
              <div class="w-full flex justify-center items-center block">
                <img [src]="'https://image.tmdb.org/t/p/w500/' + movie.backdrop_path"
                     [alt]="movie.title"
                     class="w-full h-full object-cover rounded-xl">
                <div class="play absolute">
                  <button class="flex items-center justify-center w-12 h-12 text-white rounded-full shadow-lg">
                    <span class="text-2xl">&#9654;</span>
                  </button>
                </div>
              </div>
            </div>
          </div>
      
          <!-- Movie Title -->
          <div class="whitespace-normal flex items-start justify-center flex-wrap p-0 mt-3">
            <h2 class="w-full text-center mb-0 box-border font-bold text-xl">
              {{ movie.title }}{{ movie.name }}
            </h2>
            <h3 class="text-sm text-LG text-white">{{ movie.release_date || movie.first_air_date }}</h3>
          </div>
        </div>
      </div>
      
      <!-- Modal for Trailer -->
    <!-- Modal for Trailer -->
<div *ngIf="isModalOpen" class="fixed inset-0 bg-gray-800 bg-opacity-50 flex justify-center items-center z-50">
  <div class="bg-white p-6 rounded-lg w-11/12 md:w-3/4 lg:w-1/2">
    <h2 class="text-xl text-black font-bold mb-4">Official Trailer</h2>

    <!-- Embed the trailer in iframe -->
    <iframe *ngIf="sanitizedTrailerUrl"
            [src]="sanitizedTrailerUrl"
            class="w-full h-64"
            frameborder="0"
            allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"
            allowfullscreen>
    </iframe>

    <!-- Close button -->
    <button (click)="closeTrailerModal()" class="mt-4 p-2 bg-red-500 text-white rounded">Close</button>
  </div>
</div>

      
      
    </div>
  </div>
</section>
